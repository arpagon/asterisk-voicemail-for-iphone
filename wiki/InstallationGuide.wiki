#summary Installation Guide.
#labels Phase-Deploy,Featured



===Asterisk Voicemail for iPhone===
Copyright 2008 Chris Carey (http://chriscarey.com). 
This program is distributed under the terms of the GNU General Public License

== Introduction ==

*This software is not a native iPhone app.* It is a web application which is installed on your Asterisk server. You access the software by using your iPhone web browser and accessing a URL on your Asterisk server. 

== PHP Version ==

PHP4 or PHP5 are both supported.

== Apache Setup (The Alias) ==

Set up an Apache Alias. We're going to trick the iPhone into thinking /iphone/listen/ is a directory when in fact it is a PHP page. This way when we point to a URL such as /iphone/listen/INBOX/msg0001.mp3, the iPhone has no way of telling its not just directly requesting a mp3 file. Sneaky. *You will need to change both of the parameters on the Alias line to match your particular setup.*

The listen.php page provides the security checks before serving up the voicemail message.

In your apache conf file add:
{{{
Alias /iphone/listen /var/www/html/iphone/listen.php

<Location /iphone/listen>
  ForceType application/x-httpd-php
</Location>
}}}

== More Apache Setup (User and Group) ==

Change apache default user and group to asterisk. For the software to be able to delete and move messages, it must have read/write access to all the asterisk files. This accomplishes that. (Maybe we can get away with just changing the group on a later version?)

  * User asterisk
  * Group asterisk

For me, /var/lib/php5 needed to be chowned to asterisk for session_start() to work. There may be other folders that need to be chowned to asterisk due to the web server running as asterisk. Check your apache error log for messages.

== Dependency Install ==

  * Install Lame on your web server (for mp3 creation). Debian based systems: *apt-get install lame*
  * Install php-curl IF you have 'check for updates' enabled. Debian based systems: *apt-get install php5-curl*

==Install files in the application folder==

After you unzip the asterisk-voicemail-for-iphone.zip file, go ahead and rename that folder to *iphone* and move it to /var/www/ or wherever is your web root.

==Customize i_settings.php==

  * copy i_settings.php.dist to i_settings.php

You must edit this file with correct paths and options

== All Done!! ==